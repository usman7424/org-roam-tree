#+title: org-roam-tree.el

* Description

Creates a tree-like backlinks list you can add to your org-roam buffer, which organizes backlinks by their org file source.

You can reuse the display logic to define different groupings, for example, to follow the org tree from the files containing backlinks, or maybe arbitrarily grouped results, which could be helpful with org-roam-ql. As it stands, you can quickly make new display sections. Look at =org-roam-tree-backlinks-section= for the pattern, and =org-roam-tree-backlinks= for an example of how to generate the data structure you need.

Eventually I hope to allow arbitrary depth trees, but for the moment it's limited to a depth of 2, files and nodes in the provided org-roam-mode section.


[[file:preview.png]]

*THIS HAS ROUGH EDGES*, it's functional, but a work in progress.
* Usage

#+begin_src elisp

;; Enable by adding org-roam-tree-backlinks-section to org-roam-mode-sections
;; 
;; Show only this section in the org-roam buffer:
(setq! org-roam-mode-sections '(org-roam-tree-backlinks-section))
(setq! org-roam-mode-sections '(org-roam-tree-reflinks-section))
;;
;; Add this section with the others in the org-roam buffer:
(add-to-list 'org-roam-mode-sections
             #'org-roam-tree-backlinks-section t)
#+end_src

using both =org-roam-tree-backlinks-section= and =org-roam-tree-reflinks-section= at the same time is *currently broken* (or generally, using more than one tree, if you implement your own)

You can customize =org-roam-tree-collapse-after-init= to enable/disable auto-collapse after building the buffer. 

* TODOs:

** [ ] Adjust tree insertion logic to allow arbitrary depth trees
** [ ] persist node fold states across emacs sessions
** [ ] Fix displaying multiple trees in same org-roam buffer
